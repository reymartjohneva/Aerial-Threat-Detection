<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aerial Object Detection - AI Powered</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ°Ô∏è Aerial Object Detection System</h1>
            <p class="subtitle">AI-Powered Object Classification with YOLOv8</p>
            <div class="server-status">
                <span class="status-dot" id="serverStatusDot"></span>
                <span id="serverStatusText">Checking server...</span>
            </div>
        </header>

        <main>
            <!-- Upload Section -->
            <section class="upload-section">
                <div class="card">
                    <h2>üìπ Upload File for Analysis</h2>
                    
                    <!-- File Type Toggle -->
                    <div class="file-type-toggle">
                        <button class="toggle-btn active" id="videoToggle" onclick="switchFileType('video')">
                            üìπ Video
                        </button>
                        <button class="toggle-btn" id="imageToggle" onclick="switchFileType('image')">
                            üñºÔ∏è Image
                        </button>
                    </div>
                    
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <p id="uploadText">Drag & drop video file here or click to browse</p>
                        <p class="upload-hint" id="uploadHint">Supported formats: MP4, AVI, MOV, MKV, WebM</p>
                        <input type="file" id="fileInput" accept="video/*" hidden>
                        <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                            <span id="selectBtnText">Select Video</span>
                        </button>
                    </div>
                    <div id="fileInfo" class="file-info" style="display: none;">
                        <p><strong>Selected:</strong> <span id="fileName"></span></p>
                        <p><strong>Size:</strong> <span id="fileSize"></span></p>
                        <p><strong>Type:</strong> <span id="fileType"></span></p>
                    </div>
                </div>
            </section>

            <!-- Processing Controls -->
            <section class="controls-section" id="controlsSection" style="display: none;">
                <div class="card">
                    <h2>‚öôÔ∏è Processing Options</h2>
                    <div class="options-grid" id="videoOptions">
                        <div class="option">
                            <label for="frameSkip">Frame Skip (for speed):</label>
                            <select id="frameSkip">
                                <option value="1">Process Every Frame</option>
                                <option value="2">Every 2nd Frame</option>
                                <option value="3" selected>Every 3rd Frame</option>
                                <option value="5">Every 5th Frame</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-buttons">
                        <button class="btn btn-success" id="startProcessing">
                            üöÄ Start Detection
                        </button>
                        <button class="btn btn-secondary" id="cancelProcessing" disabled>
                            ‚ùå Cancel
                        </button>
                    </div>
                </div>
            </section>

            <!-- Progress Section -->
            <section class="progress-section" id="progressSection" style="display: none;">
                <div class="card">
                    <h2>üìä Processing Progress</h2>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar"></div>
                        <span class="progress-text" id="progressText">0%</span>
                    </div>
                    <div class="processing-stats">
                        <div class="stat">
                            <span class="stat-label">Frames Processed:</span>
                            <span class="stat-value" id="framesProcessed">0</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Detections:</span>
                            <span class="stat-value" id="totalDetections">0</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Status:</span>
                            <span class="stat-value" id="processingStatus">Initializing...</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Dashboard -->
            <section class="results-section" id="resultsSection" style="display: none;">
                <div class="card">
                    <h2>üéØ Detection Results</h2>
                    <div class="results-grid">
                        <div class="result-card">
                            <h3>Total Detections</h3>
                            <div class="metric-large" id="totalDetections">0</div>
                        </div>
                        <div class="result-card">
                            <h3>Soldiers</h3>
                            <div class="metric-large soldier-count" id="soldierCount">0</div>
                        </div>
                        <div class="result-card">
                            <h3>Civilians</h3>
                            <div class="metric-large civilian-count" id="civilianCount">0</div>
                        </div>
                        <div class="result-card">
                            <h3>Other Objects</h3>
                            <div class="metric-large other-count" id="otherCount">0</div>
                        </div>
                    </div>
                    
                    <!-- Image Preview (for image detection) -->
                    <div class="image-preview" id="imagePreview" style="display: none;">
                        <h3>Detected Image</h3>
                        <img id="detectedImage" style="max-width: 100%; border-radius: 8px; margin-top: 10px;">
                    </div>
                    
                    <div class="download-section">
                        <button class="btn btn-primary" id="downloadResult" style="display: none;">
                            ‚¨áÔ∏è Download Result
                        </button>
                        <button class="btn btn-secondary" id="viewDetails" style="display: none;">
                            üìã View Detailed Report
                        </button>
                    </div>
                </div>
            </section>

            <!-- Detection Log -->
            <section class="log-section">
                <div class="card">
                    <h2>üìù Detection Log</h2>
                    <div id="logContainer" class="log-container">
                        <p class="log-entry">System initialized and ready...</p>
                        <p class="log-entry info">Waiting for video upload...</p>
                    </div>
                </div>
            </section>

            <!-- Video Preview -->
            <section class="preview-section" id="previewSection" style="display: none;">
                <div class="card">
                    <h2>üé¨ Video Preview</h2>
                    <div class="video-container">
                        <video id="videoPreview" controls></video>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Aerial Object Detection v2.0.0 | YOLOv8 + PyTorch + Electron</p>
            <p class="tech-stack">
                <span class="tech-badge">YOLOv8</span>
                <span class="tech-badge">PyTorch</span>
                <span class="tech-badge">Flask</span>
                <span class="tech-badge">Electron</span>
            </p>
        </footer>
    </div>

    <script src="detection.js"></script>
</body>
</html>
